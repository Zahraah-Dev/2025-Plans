# **1\) ุงูููุท ุงููุนูุงุฑู ุฏุงุฎู ุงูุชุทุจูู (Clean Architecture \+ MVVM)**

## **ููุงุฐุง (ุงููุงุฆุฏุฉ)**

* ูุตู ุตุงุฑู ุจูู ุงูุนุฑุถ ูุงูููุทู ูุงูุจูุงูุงุช โ ุณูููุฉ ุงูุตูุงูุฉ ูุงูุงุฎุชุจุงุฑ.  
* ูุงุจููุฉ ุงูุชูุณุน ูุฅุถุงูุฉ ููุฒุงุช ุจุฏูู ูุณุฑ ุงูุดุงุดุงุช.  
* ุชูููู ุงูุฃุฎุทุงุก ุจุชุญุฏูุฏ ุงุชุฌุงู ุงูุงุนุชูุงุฏูุงุช (Dependencies) ุจูุถูุญ.

## **ูุง ุงููุทููุจ ุชูููุฐู**

* **ุงูุทุจูุงุช:**  
  * **Presentation:** `View (Screens/Widgets) โ ViewModel (State)`  
  * **Domain:** `UseCases` (ููุงุนุฏ ุงูุนูู ุงูุตุงููุฉ)  
  * **Data:** `Repository` โ `RemoteDataSource (API)` \+ `LocalDataSource (Cache/Storage)`  
* **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State):** ุชุจููู ุฃุณููุจ ููุญูุฏ (ูุซูุงู ูู Flutter: **Riverpod** ุฃู **Bloc**) ูุน ุญุงูุงุช ููุงุณูุฉ: `idle / loading / success / error`.  
* **ุงูุชููู (Navigation):** ุชุนุฑูู ุฎุฑูุทุฉ ุตูุญุงุช ูุชูุฌูู ููุญูุฏ (Routes \+ Deep Links) ูุน ุญุงุฑุณ ุฏุฎูู (Auth Guard).  
* **ุงูุฃุฎุทุงุก (Error Handling):** ููุน ุฎุทุฃ ููุญูุฏ (Network / Validation / Auth / Unknown) ูุฑุณุงุฆู ุนุฑุจูุฉ ุฌุงูุฒุฉ.  
* **ุงููุชุงุฆุฌ (Result Type):** ูุงุฆู ูุชูุฌุฉ ููุญูุฏ (ูุฌุงุญ/ูุดู) ูุตู ูู ุงููUseCase ูููViewModel.  
* **ููุงุนุฏ ุงูุชุณููุฉ:** snake\_case ููุญูููุ ุฃุณูุงุก ูููุงุช/ูุฌูุฏุงุช ุซุงุจุชุฉ ููู ุทุจูุฉ.  
* **ุชุนูุจ ุงูุฃุญุฏุงุซ:** ููุงุท ููุงุณ ููุงุณูุฉ ุถูู ุงููViewModel (ูุชุญ ุดุงุดุฉุ ุฅุถุงูุฉ ููุณูุฉโฆ) ูุฅุฑุณุงููุง ููAnalytics ูุงุญููุง.

## **Definition of Done (ุงุนุชูุงุฏ)**

* ูููู ูุฌูุฏุงุช ุงูุทุจูุงุช ููุฌูุฏ ูุซุงุจุช.  
* ุดุงุดุฉ ูููุฐุฌูุฉ ุชุนูู ุนุจุฑ ุงููุณุงุฑ ุงููุงูู: View โ ViewModel โ UseCase โ Repository โ Remote/Local.  
* ุญุงูุงุช `loading/success/error` ุชุธูุฑ ุจุตุฑููุง ุจุดูู ููุญูุฏ.  
* ุฎุฑูุทุฉ Routes \+ Deep Links \+ Auth Guard ููุนุชูุฏุฉ.  
* ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ููุงุญุฏ ุนูู ุงูุฃูู ูู UseCases ูViewModels.  
* ุชูุซูู ููุฌุฒ (Readme ุฏุงุฎูู) ูุดุฑุญ ุชุฏูู ุงูุจูุงูุงุช ูููุงุท ุงูููุงุณ.

## **ุชุณูููุงุช**

* ูุงุฆูุฉ ุงูุทุจูุงุช ูุงููุฌูุฏุงุช ุงููุทููุจุฉ.  
* ูุงูุจ State ููุญูุฏ ุฌุงูุฒ (ุฃุณูุงุก ุงูุญุงูุงุช ูุงูุฎุตุงุฆุต).  
* ุฌุฏูู ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุนุฑุจูุฉ ุงูููุงุณูุฉ (ููู ููุน ุฎุทุฃ).  
* ุฌุฏูู ุงูุฃุญุฏุงุซ ุงูููุงุณูุฉ ุงูุชู ุณุชุฑุณู ููุชุญูููุงุช (ูุชุญ ุดุงุดุฉ/ุถุบุท ุฒุฑ ุฑุฆูุณู).

## **ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุฌุจ ุชุฌูุจูุง**

* ุงุณุชุฏุนุงุก API ูุจุงุดุฑุฉ ูู ุงููView โ ููููุน (ูุฌุจ ุนุจุฑ UseCase/Repository).  
* ููุทู ุชุฌุงุฑู ุฏุงุฎู ุงููView โ ููููู ุฅูู UseCase.  
* ุชุนุฏุฏ ุฃููุงุท ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ุจูู ุงูุดุงุดุงุช โ ุงุนุชูุฏ ุฃุณููุจูุง ูุงุญุฏูุง.

# **1\) ูุงุฆูุฉ ุงูุทุจูุงุช ูุงููุฌูุฏุงุช ุงููุทููุจุฉ**

ููููุฉ ูุฑุชุจุฉ (ููุชุฑุญุฉ ูููุชุฑ/ููุชูู/ุณูููุช ุจููุณ ุงูููุฑุฉ). ูููุจุงูู Flutter ูุซููุง:

`lib/`  
  `core/                 # ุฃุดูุงุก ูุดุชุฑูุฉ`  
    `errors/            # ุฃููุงุน ุงูุฃุฎุทุงุก ูุงููุญููู`  
    `network/           # http client, interceptors, headers`  
    `utils/             # ุฃุฏูุงุช ุนุงูุฉ (formatters..)`  
    `constants/         # ุซูุงุจุช (currencyุ ููุงุชูุญ..)`  
    `analytics/         # ูุงุฌูุฉ ุชุชุจุน ุงูุฃุญุฏุงุซ`  
    `app_check/         # ุชูุงูู App Check ุฅู ูุฒู`  
  `config/`  
    `env.dart           # ุฅุนุฏุงุฏุงุช ุงูุจูุฆุฉ (dev/stg/prod)`  
    `routes.dart        # ุฎุฑูุทุฉ ุงูุชูุฌูู + ุงูุญุฑุงุณ`  
    `theme.dart         # ุงูุฃููุงู ูุงูุฎุทูุท`  
    `localization/      # ุงูุชุฑุฌูุฉ (ar/en)`  
  `data/                # ุทุจูุฉ ุงูุจูุงูุงุช`  
    `models/            # DTOs (from/to JSON)`  
    `repositories/      # ุงููุงุฌูุงุช + ุงูุชูููุฐ`  
    `datasources/`  
      `remote/          # ุงุณุชุฏุนุงุกุงุช API`  
      `local/           # cache/SharedPrefs/DB`  
    `mappers/           # ุงูุชุญููู DTO <-> Domain`  
  `domain/              # ุทุจูุฉ ุงููุฌุงู`  
    `entities/          # ููุงุฐุฌ ุงููุฌุงู (UI-ready)`  
    `usecases/          # ููุงุนุฏ ุงูุนูู`  
    `repositories/      # ุนููุฏ ุงููRepo (Interfaces)`  
  `presentation/        # ุทุจูุฉ ุงูุนุฑุถ`  
    `common_widgets/    # ูููููุงุช UI ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู`  
    `state/             # ููุงูุจ ุงูุญุงูุฉ ุงูุนุงูุฉ`  
    `features/          # ูู ููุฒุฉ ูู ูุฌูุฏ`  
      `home/`  
        `screens/`  
        `viewmodel/`  
      `catalog/`  
      `product_detail/`  
      `cart/`  
      `checkout/`  
      `orders/`  
      `profile/`  
      `auth/`

ุงูููุฑุฉ: **View (screens)** โ ุชุชุนุงูู ููุท ูุน **ViewModel (state)** โ ููุงุฏู **UseCases** โ ุชูุฑ ุนุจุฑ **Repository** โ ุฅูู **Remote/Local**.

---

# **2\) ูุงูุจ State ููุญูุฏ (ุฃุณูุงุก ุงูุญุงูุงุช ูุงูุฎุตุงุฆุต)**

ูุณุชุฎุฏู ููุณ ุงููุงูุจ ูู ูู ุดุงุดุฉ ุนุดุงู ุชููู ุงูุชุฌุฑุจุฉ ูุชุณูุฉ:

**ุฃุณูุงุก ุงูุญุงูุงุช:**

* `idle` โ ุงููุงุฌูุฉ ุฌุงูุฒุฉ ุจุฏูู ุจูุงูุงุช ุฃู ูุจู ุฃูู ุทูุจ.  
* `loading` โ ุฌุงุฑู ุงูุฌูุจ/ุงูุชูููุฐ.  
* `success` โ ูุฌุญุช ุงูุนูููุฉ ูููู ุจูุงูุงุช.  
* `error` โ ูุดูุช ุงูุนูููุฉ ูููู ูุนูููุงุช ุนู ุงูุฎุทุฃ.

**ุงูุฎุตุงุฆุต ุงูููุงุณูุฉ ุฏุงุฎู ุงูุญุงูุฉ:**

* `data` (ุงุฎุชูุงุฑู) โ ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ ุนูุฏ ุงููุฌุงุญ.  
* `error_code` โ ููุฏ ููุทูู ุฏุงุฎูู (ูุซู `network_offline`, `validation_422`, `auth_401`โฆ).  
* `error_message` โ ูุต ุนุฑุจู ุฌุงูุฒ ููุนุฑุถ ูููุณุชุฎุฏูุฉ.  
* `last_updated_at` โ ุทุงุจุน ุฒููู ุขุฎุฑ ุชุญุฏูุซ (ูููุฏ ูู ุงูุฅูุนุงุด/ุงููpull-to-refresh).  
* `is_refreshing` โ ูู ุงูุชุญุฏูุซ ุงูุขู ุฎูู ุงูููุงููุณ (SWr).

**ููุงุนุฏ ุงุณุชุฎุฏุงู:**

* ุฃู ุทูุจ ุดุจูุฉ ูุจุฏุฃ ุจู `loading`ุ ุซู ูุชุญูู ุฅูู `success` ุฃู `error`.  
* ูู ุงูููุงุฆู: ุงุนุฑุถ **skeleton** ูุน `loading`ุ ู**Empty State** ุฅุฐุง `success` ุจุฏูู ุจูุงูุงุชุ ู**ุฑุณุงูุฉ ุฎุทุฃ** ูุน ุฒุฑ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุนูุฏ `error`.  
* ูุง ุชูุธูุฑ ุฑุณุงุฆู ุชูููุฉุ ุงุณุชุฎุฏู ุฌุฏูู ุงูุฑุณุงุฆู ุงูุฌุงูุฒุฉ ุฃุฏูุงู.

---

# **3\) ุฌุฏูู ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุนุฑุจูุฉ ุงูููุงุณูุฉ**

| error\_code | ูุชู ููุณุชุฎุฏู | ุงูุฑุณุงูุฉ ุงูุนุฑุจูุฉ (ูููุงุฌูุฉ) | ููุงุญุธุงุช ูุงุฌูุฉ |
| ----- | ----- | ----- | ----- |
| `network_offline` | ุนุฏู ูุฌูุฏ ุฅูุชุฑูุช / ูุดู DNS | **ุงุชุตุงูู ุจุงูุฅูุชุฑูุช ุบูุฑ ูุชููุฑ.** ุชุฃูุฏู ูู ุงูุดุจูุฉ ูุญุงููู ูุฌุฏุฏูุง. | ุฒุฑ โุฅุนุงุฏุฉ ุงููุญุงููุฉโ |
| `timeout` | ุงููุถุงุก ูููุฉ ุงูุทูุจ | **ุงูุฎุฏูุฉ ุชุชุฃุฎุฑ ุจุงูุงุณุชุฌุงุจุฉ.** ุญุงููู ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ูุญุธุงุช. | ุญุงูู ุชูููู ุงููููุฉ ูู ุงูุฎูููุฉ |
| `server_5xx` | ุฎุทุฃ ูู ุงูุฎุงุฏู (500โ599) | **ุญุฏุซ ุฎุทุฃ ูุคูุช ูู ุงูุฎุงุฏู.** ูุนูู ุนูู ุฅุตูุงุญู. ุนุงูุฏู ูุงุญููุง. | ุงุนุฑุถ โุฃุจูุบู ุนู ุงููุดููุฉโ ุงุฎุชูุงุฑู |
| `not_found_404` | ููุฑุฏ ุบูุฑ ููุฌูุฏ (ููุชุฌ ูุญุฐูู ูุซููุง) | **ุงูุนูุตุฑ ุบูุฑ ูุชุงุญ ุงูุขู.** | ุฃุนูุฏ ุงูุชูุฌูู ุฅูู ุดุงุดุฉ ููุงุณุจุฉ |
| `validation_422` | ุฅุฏุฎุงู ุบูุฑ ุตุญูุญ/ููุงุนุฏ ุนูู (ูุซุงู: ูููุฉ ุบูุฑ ูุชุงุญุฉ) | **ุฑุฌุงุกู ุฑุงุฌุนู ุงูุจูุงูุงุช ุงููุฏุฎูุฉ.** | ุฅู ููุฌุฏุช ุชูุงุตููุ ุงุนุฑุถููุง ุชุญุช ุงูุญููู |
| `auth_401` | ุบูุฑ ูุตุฏูู/ุงูุชูุช ุงูุฌูุณุฉ | **ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูููุชุงุจุนุฉ.** | ุงูุชุญู ููุฏุงู ุชุณุฌูู ุงูุฏุฎูู |
| `forbidden_403` | ุตูุงุญูุฉ ุบูุฑ ูุงููุฉ | **ูุง ุชููููู ุฅุฐู ุชูููุฐ ูุฐุง ุงูุฅุฌุฑุงุก.** |  |
| `rate_429` | ุทูุจุงุช ูุซูุฑุฉ ุฎูุงู ูุชุฑุฉ ูุตูุฑุฉ | **ุทูุจุงุช ูุชูุฑุฑุฉ.** ุญุงููู ุจุนุฏ ูููู. |  |
| `conflict_409` | ุชุถุงุฑุจ ุญุงูุฉ (ูุซู ูุฎุฒูู ููุฏ ุฃุซูุงุก ุงูุดุฑุงุก) | **ููุฏ ุงููุฎุฒูู ููุฐุง ุงูููุชุฌ.** ุญุฏูุซู ุงูุตูุญุฉ ูุงุฎุชุงุฑู ุจุฏูููุง. | ุฃุนุฑุถู ุจุฏุงุฆู/ููุงุณุงุช |
| `unknown` | ุฃู ุฎุทุฃ ุบูุฑ ูุตููู | **ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน.** ุญุงููู ูู ุฌุฏูุฏ. | ุณุฌููู ุงูุญุฏุซ ููุชุญููู |

**ูุฏูู:** ูู ุงูุดุงุดุฉ ุชุณุชุฎุฏู ููุณ ุงูุฑุณุงุฆู ูููุณ ุงูุญุงูุงุชุ ูุชููู ุงูุชุฌุฑุจุฉ ููุญูุฏุฉ ููุงุถุญุฉ.ูููุทูุฑ: ุญูููู ุฃููุงุฏ HTTP ุฃู ุฃููุงุฏ ุงูุฎุงุฏู (ZH-XXXX) ุฅูู `error_code` ุฃุนูุงูุ ููููุง ุชุนุฑุถ ูุตูุง ููุญุฏูุง.

---

# **4\) ุฌุฏูู ุงูุฃุญุฏุงุซ ุงูููุงุณูุฉ ููุชุญูููุงุช (GA4)**

**ูุฏูู:** ุชูุญูุฏ ุฃุณูุงุก ุงูุฃุญุฏุงุซ ูุงููุนููุงุช ุงูุฃุณุงุณูุฉ. ูู ุญุฏุซ ุจุงุณู **snake\_case**.

| event\_name | ูุชู ููุทูู | ุฃูู ุงููุนููุงุช (params) |
| ----- | ----- | ----- |
| `app_start` | ุนูุฏ ูุชุญ ุงูุชุทุจูู ุจูุฌุงุญ | `app_version`, `platform` |
| `screen_view` | ุนูุฏ ูุชุญ ุฃู ุดุงุดุฉ | `screen_name`, `previous_screen`, `section` |
| `view_item_list` | ุนุฑุถ ูุงุฆูุฉ (ูุฆุฉ/ุจุญุซ/ุดุจูุฉ) | `list_id`, `list_name`, `items_count` |
| `select_item` | ุถุบุท ุนูุตุฑ ูู ุงููุงุฆูุฉ | `item_id`, `item_name`, `list_name`, `index` |
| `view_item` | ูุชุญ ุตูุญุฉ ููุชุฌ | `item_id`, `item_name`, `category`, `price`, `in_stock` |
| `add_to_cart` | ุฅุถุงูุฉ ููุณูุฉ | `item_id`, `variant_id`, `size`, `color`, `quantity`, `price`, `currency` |
| `begin_checkout` | ุจุฏุก ุฅุฌุฑุงุกุงุช ุงูุฏูุน | `items_count`, `value`, `currency` |
| `add_shipping_info` | ุฅุฏุฎุงู/ุงุฎุชูุงุฑ ุนููุงู ุงูุดุญู | `city`, `region`, `value`, `currency` |
| `add_payment_info` | ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน | `payment_type` (cod/prepaid), `value`, `currency` |
| `purchase` | ุฅุชูุงู ุงูุทูุจ | `transaction_id`, `value`, `currency`, `items[]` (id, name, price, qty), `shipping`, `coupon?` |
| `search` | ุชูููุฐ ุจุญุซ | `search_term`, `results_count` |
| `notification_open` | ูุชุญ ุฅุดุนุงุฑ | `campaign_id`, `type` (promo/transactional) |
| `login` / `sign_up` | ุฏุฎูู/ุชุณุฌูู | `method` (phone/email) |

**ููุงุนุฏ ุนุงูุฉ:**

* ูุง ูุฑุณู ุฃู ุจูุงูุงุช ุชุนุฑูู ุดุฎุตูุฉ (ุฑูู/ุฅูููู).  
* ุงูุนููุฉ ุงูุงูุชุฑุงุถูุฉ `YER`.  
* `transaction_id` ูุฑูุฏ ููุง ูุชูุฑุฑ.  
* ูู ุดุงุดุฉ ุชุณุฌู `screen_view` ุจุงุณู ุซุงุจุช (ูุซู `home`, `product_detail`, `cart`, `checkout_shipping`, `checkout_payment`, `checkout_review`, `orders_list`, `profile`).





---

## ๐ **Back to Home | ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ**

[โ Back to Main Index | ุงูุนูุฏุฉ ููููุฑุณ ุงูุฑุฆูุณู](../../../index.html)

---
