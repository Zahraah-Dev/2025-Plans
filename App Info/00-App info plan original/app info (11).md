---

# **6\) الأداء والجودة (App Quality)**

## **Crashlytics (A – تتبّع الأعطال**

**الاستفادة:**

* كشف الأعطال الحقيقية على أجهزة المستخدمين وترتيبها حسب التأثير.  
* تقليل فقدان المبيعات بسبب توقف التطبيق أو انهياره.

**الطريقة:**

* تفعيل Crashlytics وربط رموز الإصدارات (version/build).  
* تسمية الشاشات والأحداث داخل التقارير لسهولة الفرز.  
* ربط المستخدم المجهول بمعرّف داخلي غير شخصي (user\_id المُولّد).  
* تفعيل التقارير غير الفورية لمراعاة الخصوصية، مع إرسال عند الاتصال.

**معايير القبول (Definition of Done):**

* **Crash-free users ≥ 99.5%** أسبوعيًا.  
* لا توجد **Fatal Issues** مفتوحة لأكثر من 72 ساعة في الإصدار الإنتاجي.  
* كل Crash يحتوي **breadcrumbs** كافية (آخر 10 أحداث تنقّل/عمليات).  
* تم توثيق **Runbook**: كيف نقرأ التقرير ونغلقه (Owner/ETA/Root Cause/Fix).

**تسليمات:**

* لوحة Crashlytics مُفلترة حسب الإصدار والبيئة.  
* تسمية موحّدة للشاشات داخل التقارير.  
* Runbook “إدارة الأعطال” (خطوات/مسؤوليات/أزمنة استجابة).

**أخطاء يجب تجنبها:**

* طباعة بيانات حساسة في السجلات.  
* ترك إصدارات قديمة غير مُعطّلة في التقارير (يشوّه المؤشرات).  
* تجاهل الأعطال الصامتة (Non-fatal) المرتبطة بالCheckout/Cart.

---

## **Performance Monitoring (B – مراقبة الأداء**

**الاستفادة:**

* ضمان سلاسة التجربة (خصوصًا صفحات القائمة، تفاصيل المنتج، والخطوات الحرجة للشراء).  
* تقليل التسرّب في القمع الشرائي بسبب البطء.

**الطريقة:**

* تفعيل Performance Monitoring وقياس:  
  1. **App Start** (وقت الإطلاق للواجهة الأولى).  
  2. **Screen Load** للشاشات الحرجة: Home, Product Detail, Cart, Checkout (Shipping/Payment/Review).  
  3. **Network Traces** لمسارات API الحرجة (products, checkout, orders).  
* إضافة **Custom Traces** عند الحاجة (بحث، تحميل صور).  
* اعتماد **Skeletons** و**Caching** لتقليل الإدراك بالبطء.

**معايير القبول (Definition of Done):**

* **App Start P95 ≤ 2.5s**.  
* **Screen Load P95 ≤ 1.2s** للشاشات الحرجة على أجهزة متوسطة.  
* **Network P95 ≤ 800ms** لنِداءات المنتجات، و≤ 1.2s لـ checkout (باستثناء مزود خارجي).  
* معدل **ANR** شبه صفري، وإن وجد ≤ 0.1%.  
* تنبيهات عند تجاوز الحدود (P95) خلال 1 ساعة من رصد الانحراف.

**تسليمات:**

* لوحة مؤشرات “Performance” تحوي App Start/Screen Load/Network P95.  
* قائمة الشاشات الحرجة \+ أهداف الأداء لكل شاشة.  
* خطة تحسين (Performance Budget) إذا تم تجاوز الحدود.

**أخطاء يجب تجنبها:**

* تتبّع عام بلا تسميات واضحة → يصعب التحليل.  
* جمع صور ضخمة بدون ضغط أو تحكّم بالحجم.  
* جلب بيانات كبيرة لشاشات لا تعرضها فورًا (غياب pagination).

---

## **C) الاختبارات – Unit Tests & UI Tests**

**الاستفادة:**

* منع رجوع الأعطال (Regression) عند كل إطلاق.  
* تسريع التطوير بثقة أعلى في تغييرات الكود.

**الطريقة:**

* **Unit Tests (منطق):** لطبقة **Domain (UseCases)** و**Data (Repositories/Mappers)**.  
* **UI Tests (واجهة):** مسارات حرجة (إضافة للسلة → Checkout COD → تأكيد الطلب).  
* **Contract Tests:** تحقق من صيغ JSON الأساسية (DTO ↔ Domain) وتوافقها مع الـAPI.  
* تشغيل الاختبارات ضمن CI لكل Merge.

**معايير القبول (Definition of Done):**

* تغطية Unit لطبقة **Domain ≥ 70%**، و**Data ≥ 50%**.  
* سيناريوهات UI آلية تغطي:  
  1. فتح التطبيق \+ عرض Home بدون أخطاء.  
  2. بحث \+ فتح تفاصيل منتج \+ إضافة للسلة.  
  3. Checkout COD كامل حتى شاشة النجاح.  
* الاختبارات تمرّ **100%** قبل أي إصدار إنتاجي.

**تسليمات:**

* تقرير تغطية اختبارات يُنشر آليًا في CI.  
* قائمة سيناريوهات UI موثّقة (Given/When/Then) للشاشات الحرجة.  
* ملفات Fixtures للـDTOs الأساسية (منتج/سلة/طلب).

**أخطاء يجب تجنبها:**

* كتابة اختبارات UI هشة تعتمد على نصوص تتغير كثيرًا.  
* إهمال اختبارات الأخطاء (401/422/Timeout).  
* تجاهل تحديث Fixtures عند تغيّر عقد الـAPI.

---

## **D) مؤشرات الجودة (Quality KPIs) – للمتابعة الأسبوعية**

* **Crash-free users** (الهدف ≥ 99.5%).  
* **App Start P95** (الهدف ≤ 2.5s).  
* **Screen Load P95** للشاشات الحرجة (≤ 1.2s).  
* **Network P95** لنِداءات المنتجات/الشراء.  
* **ANR Rate** (≤ 0.1%).  
* **نسبة نجاح سيناريوهات UI الآلية** (100% قبل الإطلاق).

---

## **E) التنبيهات (Alerts)**

* تنبيه فوري عند:  
  * هبوط **Crash-free users** عن 99%.  
  * تجاوز **App Start P95** هدفه لمدّة \> 30 دقيقة.  
  * ارتفاع أخطاء Checkout أو 5xx على مسارات الشراء.  
* قناة تنبيه واحدة متفق عليها (Slack/Email) مع **Owner** لكل نوع تنبيه.

---

## **F) خطة الإصدار (Release Gates)**

لا يُنشر الإصدار إلى الإنتاج إلا إذا:

1. **الاختبارات الآلية** (Unit/UI) ناجحة 100%.  
2. **Crash-free users للنسخة التجريبية ≥ 99.5%** خلال 24 ساعة.  
3. مؤشرات **App Start/Screen Load P95** ضمن الحدود.  
4. لا توجد **Fatal Issues مفتوحة** متعلقة بـ Checkout/Cart.


---

## 🏠 **Back to Home | العودة للرئيسية**

[← Back to Main Index | العودة للفهرس الرئيسي](../../../index.html)

---
