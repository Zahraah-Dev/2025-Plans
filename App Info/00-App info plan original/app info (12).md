

# **7\) ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management)**

---

## **ุงููุงุฆุฏุฉ**

* ุชูุธูู ุชุฏูู ุงูุจูุงูุงุช ุฏุงุฎู ุงูุชุทุจูู ุจุญูุซ ุชููู **ุงูุดุงุดุงุช ุฏุงุฆููุง ูุชุฒุงููุฉ** ูุน ุญุงูุฉ ุงููุณุชุฎุฏู (ุณูุฉุ ุทูุจุงุชุ ุฌูุณุฉโฆ).  
* ุชูููู ุงูุฃุฎุทุงุก ุงููุงุชุฌุฉ ุนู ููุฏุงู ุงูุจูุงูุงุช ุฃู ุนุฏู ุชุญุฏูุซ ุงููุงุฌูุฉ.  
* ุชุญุณูู ุชุฌุฑุจุฉ ุงูุงุณุชุฎุฏุงู (ุชุญุฏูุซ ููุฑู โ ุจุฏูู ุงุฑุชุจุงู).

---

## **ุงููุทููุจ ูู ุงูุชูููุฐ**

### **A) ุญุงูุฉ ุงููุณุชุฎุฏู (Session/Auth State)**

* ุญูุธ ุจูุงูุงุช ุงูุฌูุณุฉ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู (User ID, Token, Profile).  
* ุชุญุฏูุซ ุงูุญุงูุฉ ุชููุงุฆููุง ุนูุฏ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุชููู โ ุฅุนุงุฏุฉ ุชูุฌูู ูุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู.  
* ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู (Profile, Addresses) ุจูุฌุฑุฏ ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู.

### **B) ุงูุณูุฉ (Cart State)**

* ุชุชุจุน ุงูุนูุงุตุฑ ุงููุถุงูุฉ (product\_id, variant\_id, qty, price\_at\_add).  
* ุชุญุฏูุซ ุงูุฃุณุนุงุฑ ุนูุฏ ูู ูุชุญ ููุณูุฉ ุฃู ุนูุฏ ุงููCheckout (ูุน ููุงุฑูุฉ ุงูุณุนุฑ ุงูุญุงูู).  
* ูุฒุงููุฉ ุงูุณูุฉ ูุน ุงูุฎุงุฏู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุงูุฎุฑูุฌ (User โ Guest Cart).  
* ุฅุธูุงุฑ ุญุงูุฉ Loading/Empty/Error ูู ุงููุงุฌูุฉ ุจุดูู ููุญูุฏ.

### **C) ุงูุทูุจุงุช (Orders State)**

* ุญูุธ ุขุฎุฑ ุงูุทูุจุงุช (Recent Orders) ูุน ุงูุญุงูุฉ ุงูุญุงููุฉ ููู ุทูุจ.  
* ุชุญุฏูุซ ุงูุญุงูุฉ ุนูุฏ ูุตูู ุฅุดุนุงุฑ ุฃู Refresh ูุฏูู.  
* ุฅููุงููุฉ ุงุณุชุนุฑุงุถ ุงูุทูุจุงุช ุญุชู ุจุฏูู ุฅูุชุฑูุช (ูู ุงููุงุด).

### **D) ุงูุชูุถููุงุช ูุงูุฅุนุฏุงุฏุงุช (Preferences/Settings State)**

* ุงููุบุฉ (ar/en).  
* ูุถุน ุงูุฅุดุนุงุฑุงุช (ููุนูู/ูุชููู).  
* ุทุฑููุฉ ุงูุฏูุน ุงูููุถูุฉ (COD/Prepaid).  
* ุชูุถููุงุช ูุงุฌูุฉ ูุซู ุขุฎุฑ ููุชุฑุฉ ุฃู ุชุฑุชูุจ ููุชุฌุงุช.

---

## **ูุนุงููุฑ ุงููุจูู (Definition of Done)**

* **Session State**: ูุชู ุชุณุฌูู ุงูุฏุฎูู ูุงูุฎุฑูุฌ ูุชุญุฏูุซ ุงูุฌูุณุฉ ุจุดูู ูุชุณู ูู ุฌููุน ุงูุดุงุดุงุช.  
* **Cart State**: ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ูุธูุฑ ููุฑูุง ูู ูู ุดุงุดุฉ ูุฑุชุจุทุฉุ ูุชุญุฏูุซ ุงูุณุนุฑ ุนูุฏ ุงูุชุบููุฑ.  
* **Orders State**: ุดุงุดุฉ ุงูุทูุจุงุช ุชุนุฑุถ ุขุฎุฑ ุญุงูุฉ ุจุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ุงูุฏุฎูู.  
* **Preferences State**: ุชุบููุฑุงุช ุงูุฅุนุฏุงุฏุงุช ุชุธูุฑ ูุจุงุดุฑุฉ ูุชูุญูุธ ููุฌูุณุฉ ุงูุชุงููุฉ.  
* ูู ุญุงูุฉ ูุฏุนููุฉ ุจู **States ููุงุณูุฉ**: `idle`, `loading`, `success`, `error`.

---

## **ุงูุชุณูููุงุช**

1. **State Containers** (ViewModel/Bloc/Riverpod) ููู ูู: User, Cart, Orders, Preferences.  
2. **ุชุนุฑูู ุงูุญุงูุงุช (State Classes)** ุชุดูู: idle, loading, success(data), error(message).  
3. **ูุณุชูุฏ ููุถุญ Events ุงูุฃุณุงุณูุฉ** (AddToCart, RemoveFromCart, RefreshOrdersโฆ).  
4. ุงุฎุชุจุงุฑุงุช Unit ูู Cart ูOrders ููุชุฃูุฏ ุฃู ุงูุญุงูุฉ ุชุชุบูุฑ ุจุดูู ุตุญูุญ.  
5. ุขููุฉ ูุฒุงููุฉ ุจูู ุงููุงุด ุงููุญูู ูุงูุฎุงุฏู.

---

## **ุฃุฎุทุงุก ูุฌุจ ุชุฌูุจูุง**

* ุชุฎุฒูู ุงูุญุงูุฉ ูู ุงููุงุฌูุฉ ูุจุงุดุฑุฉ (Widget/Screen) โ ูุณุจุจ ููุฏุงู ุงูุจูุงูุงุช ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุดุงุดุฉ.  
* ุนุฏู ุชุญุฏูุซ ุงูุณุนุฑ ุนูุฏ Checkout โ ูุณุจุจ ุชุนุงุฑุถ ูุน ุงูุฎุงุฏู.  
* ุงูุณูุงุญ ุจูุฌูุฏ ุฃูุซุฑ ูู ุญุงูุฉ ูุชูุงูุถุฉ (ูุซุงู: ุงููุณุชุฎุฏู ูุณุฌูู ุฏุฎูู ููู ุงููSession State ูุงุฑุบ).  
* ุชุฌุงูู ุฅุฏุงุฑุฉ Empty/Error States โ ูุฎูู ุชุฌุฑุจุฉ ูุฑุจูุฉ ูููุณุชุฎุฏู.

# **ุงูุชุณูููุงุช โ ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management)**

1. **State Containers**  
   * ุฅูุดุงุก ุญุงููุงุช ุญุงูุฉ (ViewModel / Bloc / Riverpod Provider) ููู ูุฌุงู ุฑุฆูุณู:  
     * ุงููุณุชุฎุฏู (User State)  
     * ุงูุณูุฉ (Cart State)  
     * ุงูุทูุจุงุช (Orders State)  
     * ุงูุชูุถููุงุช (Preferences State)  
2. **ุชุนุฑูู ุงูุญุงูุงุช (State Classes)**  
   * ูู ุญุงููุฉ ุชุญุชูู ุญุงูุงุช ููุงุณูุฉ:  
     * `idle` (ุจุฏูู ุจูุงูุงุช ุจุนุฏ)  
     * `loading` (ุฌุงุฑู ุงูุชูููุฐ)  
     * `success(data)` (ุชู ุงูุชูููุฐ ูุน ุจูุงูุงุช)  
     * `error(message)` (ูุดู ูุน ุฑุณุงูุฉ)

3. **ูุณุชูุฏ Events ุงูุฃุณุงุณูุฉ**  
   * ูุงุฆูุฉ ุจุงูุฃุญุฏุงุซ ุงูุชู ุชุบููุฑ ุงูุญุงูุฉุ ูุซู:  
     * `AddToCart` โ ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ  
     * `RemoveFromCart` โ ุฅุฒุงูุฉ ููุชุฌ ูู ุงูุณูุฉ  
     * `RefreshOrders` โ ุชุญุฏูุซ ูุงุฆูุฉ ุงูุทูุจุงุช  
     * `UpdatePreferences` โ ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช  
4. **ุงุฎุชุจุงุฑุงุช Unit**  
   * ุจูุงุก ุงุฎุชุจุงุฑุงุช ููุญุฏุฉ Cart ูOrders ููุชุญูู ูู:  
     * ุฅุถุงูุฉ/ุฅุฒุงูุฉ ุนูุงุตุฑ ุชุบููุฑ ุงูุญุงูุฉ ุจุดูู ุตุญูุญ.  
     * ุชุญุฏูุซ ุงูุทูุจุงุช ูุธูุฑ ุงููุชูุฌุฉ ุงูุตุญูุญุฉ.  
5. **ุขููุฉ ูุฒุงููุฉ ุงููุงุด ูุน ุงูุฎุงุฏู**  
   * ุนูุฏ ุชููุฑ ุฅูุชุฑูุช: ุชุญุฏูุซ ุงูุญุงูุฉ ูู ุงูุฎุงุฏู.  
   * ุนูุฏ ุนุฏู ุชููุฑ ุฅูุชุฑูุช: ุงุณุชุฎุฏุงู ุงููุงุด ุงููุญูู.  
   * ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ุฃู ุงูุฎุฑูุฌ: ุฏูุฌ ุงูุณูุฉ (Guest โ User) ููุฒุงููุฉ ุงูุจูุงูุงุช.


---

## ๐ **Back to Home | ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ**

[โ Back to Main Index | ุงูุนูุฏุฉ ููููุฑุณ ุงูุฑุฆูุณู](../../../index.html)

---
